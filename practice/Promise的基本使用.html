<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise的基本使用</title>
</head>
<body>
    <script>
        /* Promise的链式调用 */
        /* new 一个构造函数（1.保存了一些状态信息 2.执行传入的回调函数）
           在执行传入的回调函数时，会传入两个参数，resolve和reject。本身也是函数 */
        new Promise((resolve,reject) => {
            /* 使用 setTimeout 模拟异步请求，请求数据 */
            setTimeout(() =>{
                //回调resolve()后，将数据传到then()，回调then()方法；如果是reject()方法，则回调catch()方法
                resolve("aaa")
            },1000)
            /* 分离处理的步骤，不然全部写在setTimeout()里面代码很乱 */
            }).then(res => {
                console.log(res,'第一层的10行处理代码')
                // return new Promise((resolve,reject) =>{
                //     // resolve(res + '111')
                //     reject('err message')
                // })

                /* resolve 简写 */
                // return Promise.resolve(res + '111')
                // return res + '111'
                
                /* reject 简写*/
                //return Promise.reject('err message')
                throw 'err message'
            }).then((res) => {
                console.log(res,'第二层的10行处理代码')
                // return new Promise((resolve) =>{
                //     resolve(res + '222')
                // })
                // return Promise.resolve(res + '222')
                return res + '222'
            }).then(res => {
                console.log(res,'第三层的10行处理代码')
            }).catch(err => {
                console.log(err)
            })
    </script>
</body>
</html>